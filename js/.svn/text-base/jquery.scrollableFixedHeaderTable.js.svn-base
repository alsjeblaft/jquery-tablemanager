jQuery.fn.scrollableFixedHeaderTable=scrollableFixedHeaderTable;sfht={};function scrollableFixedHeaderTable(s,b,l,u){if(!$(this).hasClass("scrollableFixedHeaderTable")){return}var i=$(this);i.wrap('<div style="text-align: left"></div>');i.parent().before('<div class="noDivBounds"><div class="sfhtColumnSelectButton_unPressed" title="Select Columns"></div><div class="sfhtColumnSelect"></div></div>');var p=i.parent();var o=p.clone();o.find("tr:gt(0)").remove();var e=o.html();var f=p.html();i.before('<table cellspacing="0" cellpadding="0" class="sfhtTable"><tr><td><div class="sfhtHeader"></div></td></tr><tr><td><div class="sfhtData"></div></td></tr></table>');p.find("div:nth(0)").html(e);p.find("div:nth(1)").html(f);var t=i.attr("id")+"_header";var j=p.find(".sfhtHeader");var c=j.find("table").attr("id",t);i.remove();o.remove();var r=p.find(".sfhtData");r.height(b).width(s);var k=r.find("table");var d=k.attr("id");r.scroll(function(){j.scrollLeft($(this).scrollLeft())});sfht.adjustTables(c,k);sfht.adjustHeader(j,r,k);if(!l){p.prev().remove();return}p.prev().find("div:nth(0)").attr("id",d+"_columnSelectButton");p.prev().find("div:nth(1)").attr("id",d+"_columnSelect");sfht.loadColumnSelect($(sfht.getColumnSelect(d)),j,d,r,k,u);var q=sfht.getColumnSelect(d);var m=sfht.getSelectButton(d);m.toggle(function(){q.show(250);m.attr("class","sfhtColumnSelectButton_Pressed")},function(){q.hide(250);m.attr("class","sfhtColumnSelectButton_unPressed")});q.hide();if(u==null||u==""){return}var h=j.find("td, th").length;if(h==0){return}var n=$.cookie(u);if(n){n=n.substring(0,h);for(var g=0;g<h;g++){var a=parseInt(n.charAt(g));if(a!=1){sfht.hideColumn(d,g);q.find("input:nth("+g+")").removeAttr("checked")}}}else{var v=sfht.fillState(h);$.cookie(u,v)}}sfht.loadColumnSelect=function(d,e,f,b,c,a){var g="<ul>";e.find("td, th").each(function(h){g+='<li><input type="checkbox" class="columnCheck" checked="checked">'+$(this).text()+"</input></li>"});g+="</ul>";d.html(g);d.find(".columnCheck").each(function(h){var i=$(this);i.click(function(){var k=i.attr("checked");if(!k){sfht.hideColumn(f,h);if(a!=null&&a!=""){var j=$.cookie(a);j=replaceOneChar(j,"0",h+1);$.cookie(a,j)}}else{sfht.showColumn(f,h);if(a!=null&&a!=""){var j=$.cookie(a);j=replaceOneChar(j,"1",h+1);$.cookie(a,j)}}sfht.adjustHeader(e,b,c)})})};sfht.hideColumn=function(d,g){var c=$("table[id="+d+"]");var b=sfht.getFixedHeader(d);c.find("tr").each(function(){$($(this).find("td,th")[g]).hide()});b.find("tr").each(function(){$($(this).find("td,th")[g]).hide()});var e=sfht.getSfhtVar(d);var f=sfht[e]["lastWidth"];var a=sfht[e]["tdWidths"][g];f-=a;sfht[e]["lastWidth"]=f;c.width(f);b.width(f)};sfht.showColumn=function(d,g){var c=$("table[id="+d+"]");var b=sfht.getFixedHeader(d);c.find("tr").each(function(){$($(this).find("td,th")[g]).show()});b.find("tr").each(function(){$($(this).find("td,th")[g]).show()});var e=sfht.getSfhtVar(d);var f=sfht[e]["lastWidth"];var a=sfht[e]["tdWidths"][g];f+=a;sfht[e]["lastWidth"]=f;c.width(f);b.width(f)};sfht.adjustHeader=function(e,g,d){var b=g.width();var c=g.innerWidth();var f=b-c;var a=d.width();if(!($.browser.mozilla||$.browser.msie||$.browser.opera)){c=a>=b?b-17:b}if(a>=c){e.width(c)}else{e.width(a)}};sfht.adjustTables=function(a,b){var e=new Array();var f=0;var d=0;var h=sfht.getSfhtVar(b.attr("id"));var c=b.attr("id");var g="table[id="+c+"] tr:nth(0)";$(g).find("td, th").each(function(l){var j=$(this);var i=parseInt(j.width());var m=parseInt(j.attr("width"));var k=m>i?m:i;d+=k;e[l]=k;j.width(k);a.find("td:nth("+l+"), th:nth("+l+")").width(k)});f=d;sfht[h]={lastWidth:f,tdWidths:e}};sfht.getSfhtVar=function(a){return a+"Widths"};sfht.getSelectButton=function(a){return($("div[id="+a+"_columnSelectButton]"))};sfht.getColumnSelect=function(b){var a="";return($("div[id="+b+"_columnSelect]"))};sfht.getFixedHeader=function(a){return($("table[id="+a+"_header]"))};sfht.fillState=function(b){if(b==0){return}state="";for(var a=0;a<b;a++){state+="1"}return state};function replaceOneChar(e,b,a){var d=new RegExp("^(.{"+ --a+"}).(.*)$","");return e.replace(d,"$1"+b+"$2")};